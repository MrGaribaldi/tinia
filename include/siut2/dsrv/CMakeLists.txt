IF(NOT WIN32)
  # 111219: Strange that the last dir is needed. And even stranger that it is needed on bombadil and not fangorn2...
  INCLUDE_DIRECTORIES(../..  /usr/local/include/glm)
  SET( CMAKE_CXX_FLAGS "-fPIC ${CMAKE_CXX_FLAGS}" )
ENDIF()

ADD_LIBRARY(SIUT2_SHARED SHARED FreeglutWindow.cpp)
TARGET_LINK_LIBRARIES(SIUT2_SHARED ${OPENGL_LIBRARY} ${GLEW_LIBRARY} ${Freeglut_LIBRARY})
ADD_LIBRARY(SIUT2 STATIC FreeglutWindow.cpp)
TARGET_LINK_LIBRARIES(SIUT2 ${OPENGL_LIBRARY} ${GLEW_LIBRARY} ${Freeglut_LIBRARY})

IF(NOT WIN32)
  INSTALL( TARGETS SIUT2 SIUT2_SHARED
    LIBRARY DESTINATION dll
    ARCHIVE DESTINATION lib
    PERMISSIONS WORLD_READ WORLD_EXECUTE OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE
    )
ELSE()
  INSTALL( TARGETS SIUT2 SIUT2_SHARED
    LIBRARY DESTINATION ${siut2_INSTALL_PREFIX}/dll
    ARCHIVE DESTINATION ${siut2_INSTALL_PREFIX}/lib
    PERMISSIONS WORLD_READ WORLD_EXECUTE OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE
    )
ENDIF()